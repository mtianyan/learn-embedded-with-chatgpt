✅ 以下是 **第 10 项课程内容：蓝牙模块通信，掌握蓝牙模块控制小车** 的整理：

---

## **10、蓝牙模块通信：掌握蓝牙模块控制小车**

---

### 🎯 目标：

掌握使用 **蓝牙串口模块（如 HC-05 / HC-06）** 与 STM32 进行通信，理解其通信原理，能够通过手机蓝牙发送指令控制小车前进、后退、转向、停止等动作。

---

### 📘 基础知识：

#### 🔌 HC-05/HC-06 蓝牙模块特点：

* **通信方式**：串口 UART（TX/RX）
* **默认波特率**：9600（部分模块为 38400）
* **工作电压**：3.3V（部分模块板载 5V 转 3.3V）

#### 📲 通信原理：

* 手机通过蓝牙连接蓝牙模块 → 手机 APP 发送控制字符 → STM32 解析指令 → 控制小车运动

---

### 🔧 硬件连接：

| 蓝牙模块 | STM32            |
| ---- | ---------------- |
| TX   | RX（如 USART1\_RX） |
| RX   | TX（如 USART1\_TX） |
| VCC  | 3.3V（或 5V，取决于模块） |
| GND  | GND              |

---

### 🧪 控制协议示例：

| 控制字符 | 动作 |
| ---- | -- |
| `F`  | 前进 |
| `B`  | 后退 |
| `L`  | 左转 |
| `R`  | 右转 |
| `S`  | 停止 |

---

### 🧰 STM32 接收处理示例代码：

```c
char bt_data;

void USART1_IRQHandler(void)
{
    if (USART_GetITStatus(USART1, USART_IT_RXNE) != RESET)
    {
        bt_data = USART_ReceiveData(USART1);

        switch(bt_data)
        {
            case 'F': car_forward(); break;
            case 'B': car_backward(); break;
            case 'L': car_turn_left(); break;
            case 'R': car_turn_right(); break;
            case 'S': car_stop(); break;
        }
    }
}
```

---

### 📱 手机控制方式：

#### ✅ 推荐手机 App：

* **蓝牙串口助手**（如 "串口蓝牙调试助手"、"Bluetooth Terminal"）
* 或自制 Android App（如 MIT App Inventor 制作）

#### ✅ 使用步骤：

1. 打开手机蓝牙；
2. 连接 HC-05/HC-06；
3. 输入对应指令（如 F、B、L、R、S）发送；
4. 小车对应动作。

---

### 🚗 控制函数示例（PWM 控电机）：

```c
void car_forward(void)
{
    // 设置电机正转
    set_motor_dir(LEFT, FORWARD);
    set_motor_dir(RIGHT, FORWARD);
    set_motor_speed(LEFT, 80);
    set_motor_speed(RIGHT, 80);
}
```

---

### 🔧 补充配置（可选）：

* 使用 AT 指令修改蓝牙模块名称、波特率等：

```plaintext
AT       // 测试是否连接
AT+NAME=MyCarBT    // 设置蓝牙名称
AT+BAUD4           // 设置波特率为 9600
```

> 需按住 `KEY` 键上电，进入 AT 模式。

---

### 📌 拓展方向：

* 增加 PID 控速，支持调速命令；
* 配合超声波模块，添加防撞逻辑；
* 蓝牙 → ESP32 BLE（低功耗蓝牙，支持双向通信）；
* 蓝牙 APP 图形化 UI 操控界面；

---

需要我生成 STM32 蓝牙控制小车完整工程模板（Keil + HAL 或寄存器版），或 App 蓝牙控制示例吗？可以直接给你。

✅ 以下是 **第 9 项课程内容** 的整理：

---

### **9、ESP8266 无线通信**

#### 🎯 目标：

掌握通过 **ESP8266 WiFi 模块** 进行无线数据通信的原理和方法，能够实现小车与手机/电脑等上位机之间的数据交互或远程控制。

---

### 📘 知识点：

#### 📡 ESP8266 模块简介：

* 集成 WiFi 功能的超低功耗 MCU。
* 支持：

  * 串口 AT 指令通信；
  * STA 模式（连接路由器）；
  * AP 模式（热点模式）；
  * TCP/UDP 协议。

#### 🔗 通信模式：

* **串口通信**：STM32 通过 UART 与 ESP8266 连接。
* **网络通信**：

  * 建立 TCP 服务器（小车等候连接）；
  * 建立 TCP 客户端（主动连接服务器）；
  * 建立 UDP 广播（局域网广播控制）；
  * 使用 HTTP 请求通信（简单易用，适合初学）。

---

### 🧪 实践案例：

#### 示例：使用 ESP8266 控制小车前进/后退

##### 1️⃣ 硬件连接：

* ESP8266 与 STM32 UART（通常波特率 115200）；
* 电源建议用独立 3.3V 稳压源，防止干扰重启；

##### 2️⃣ 配置步骤（AT 指令模式）：

```plaintext
AT+CWMODE=1               // 设置为 STA 模式
AT+CWJAP="ssid","passwd"  // 连接路由器
AT+CIPMUX=0               // 单连接模式
AT+CIPSTART="TCP","192.168.1.100",8080   // 连接服务器（上位机 IP）
```

##### 3️⃣ 发送数据：

```plaintext
AT+CIPSEND=6
FORWARD   // 控制小车前进指令
```

STM32 接收到 "FORWARD" 字符串后，控制小车前进。

---

### 🧰 STM32 接收数据逻辑：

```c
void USART1_IRQHandler(void)
{
    if(USART_GetITStatus(USART1, USART_IT_RXNE) != RESET)
    {
        char ch = USART_ReceiveData(USART1);
        uart_buffer[uart_index++] = ch;

        if(strstr(uart_buffer, "FORWARD")) {
            car_forward();
            uart_index = 0;
        }
    }
}
```

---

### 📱 上位机控制方式：

* 手机浏览器（适配 HTTP 模式）；
* 自定义手机 APP（WiFi-TCP 控制）；
* 电脑串口调试工具模拟网络数据发送；
* PC端 Python 控制脚本（socket 通信）；

---

### 🚦 项目拓展方向：

* 实现网页控制界面（HTML + ESP8266 Web Server）；
* 使用 MQTT 协议接入物联网平台；
* 与 ESP-NOW 模式点对点通信（无需路由器）；

---

需要我帮你写出完整的 ESP8266 AT 指令初始化程序、STM32 接收控制逻辑、或上位机 Python 控制端示例吗？可以直接生成。

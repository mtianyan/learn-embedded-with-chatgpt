éå¸¸å¥½ï¼Œæˆ‘ä»¬è¿›å…¥ **Linux C/C++ å¤šæ–‡ä»¶å·¥ç¨‹ç®¡ç†æ ¸å¿ƒ â€”â€” `Makefile` å­¦ä¹ ä¸å®æˆ˜ç¯‡\`**ã€‚

---

# ğŸ› ï¸ Makefileï¼šè®©å¤šæ–‡ä»¶å·¥ç¨‹ä¸€é”®è‡ªåŠ¨åŒ–æ„å»º

## âœ¨ ä¸ºä»€ä¹ˆè¦ç”¨ Makefileï¼Ÿ

åœ¨ C/C++ é¡¹ç›®ä¸­ï¼Œä»£ç å¾€å¾€åˆ†æ•£åœ¨å¤šä¸ªæºæ–‡ä»¶ä¸­ã€‚æ¯æ¬¡æ‰‹åŠ¨ç¼–è¯‘å®¹æ˜“ï¼š

* å¿˜è®°ç¼–è¯‘å“ªä¸ªæ–‡ä»¶
* ç¼–è¯‘å‚æ•°ä¹±å†™
* æ”¹äº†ä¸€ç‚¹å°ä»£ç è¿˜è¦é‡ç¼–æ‰€æœ‰æ–‡ä»¶

> **Makefile** è§£å†³è¿™äº›é—®é¢˜ â€”â€” å®ƒå°±åƒâ€œè‡ªåŠ¨ç¼–è¯‘è¯´æ˜ä¹¦â€ï¼Œåªè¦è¾“å…¥ä¸€æ¡ `make` å‘½ä»¤ï¼Œé¡¹ç›®å°±èƒ½è‡ªåŠ¨ç¼–è¯‘ã€é“¾æ¥ã€‚

---

## ğŸ”° åŸºç¡€ç»“æ„

```makefile
target: dependencies
	commands
```

ä¾‹å­ï¼š

```makefile
main: main.o utils.o
	gcc main.o utils.o -o main

main.o: main.c
	gcc -c main.c

utils.o: utils.c
	gcc -c utils.c
```

---

## ğŸ—ï¸ å¤šæ–‡ä»¶é¡¹ç›®å®ä¾‹

å‡è®¾ä½ æœ‰å¦‚ä¸‹ç»“æ„ï¼š

```
project/
â”œâ”€â”€ main.c
â”œâ”€â”€ utils.c
â”œâ”€â”€ utils.h
â”œâ”€â”€ Makefile
```

### ğŸ”§ ç¼–å†™ Makefile

```makefile
# ç¼–è¯‘å™¨
CC = gcc

# ç¼–è¯‘é€‰é¡¹
CFLAGS = -Wall -g

# ç›®æ ‡æ–‡ä»¶
OBJS = main.o utils.o

# ç”Ÿæˆçš„æœ€ç»ˆç›®æ ‡ç¨‹åº
TARGET = app

# é»˜è®¤ç›®æ ‡
all: $(TARGET)

# é“¾æ¥ç›®æ ‡
$(TARGET): $(OBJS)
	$(CC) $(OBJS) -o $(TARGET)

# ç¼–è¯‘æºæ–‡ä»¶
%.o: %.c
	$(CC) $(CFLAGS) -c $< -o $@

# æ¸…ç†
clean:
	rm -f $(OBJS) $(TARGET)
```

---

## ğŸ“˜ å…³é”®è¯­æ³•è¯´æ˜

| è¡¨è¾¾å¼        | å«ä¹‰                     |
| ---------- | ---------------------- |
| `$(CC)`    | ä½¿ç”¨å˜é‡ `CC`ï¼ˆæ­¤å¤„ä¸º `gcc`ï¼‰   |
| `$@`       | å½“å‰è§„åˆ™çš„ç›®æ ‡å               |
| `$<`       | å½“å‰è§„åˆ™çš„ç¬¬ä¸€ä¸ªä¾èµ–æ–‡ä»¶           |
| `%.o: %.c` | è¡¨ç¤º `.c` ç¼–è¯‘æˆ `.o` çš„é€šç”¨è§„åˆ™ |

---

## âœ… ä½¿ç”¨æ–¹å¼

```bash
make        # è‡ªåŠ¨ç¼–è¯‘ç”Ÿæˆ app
make clean  # æ¸…ç†ç”Ÿæˆæ–‡ä»¶
```

---

## ğŸ” å®ç”¨æŠ€å·§

### 1. è‡ªåŠ¨è·å–æ‰€æœ‰ `.c` æ–‡ä»¶å¹¶ç”Ÿæˆ `.o`

```makefile
SRCS := $(wildcard *.c)
OBJS := $(SRCS:.c=.o)
```

### 2. ä½¿ç”¨ `-I` æŒ‡å®šå¤´æ–‡ä»¶ç›®å½•ï¼Œ`-L` å’Œ `-l` æŒ‡å®šåº“è·¯å¾„å’Œé“¾æ¥åº“

```makefile
CFLAGS += -I./include
LDFLAGS += -L./lib -lm
```

---

## ğŸš€ é«˜çº§ç‰¹æ€§é¢„å‘Šï¼ˆè¿›é˜¶å¯ä»¥æ‹“å±•ï¼‰

* è‡ªåŠ¨ä¾èµ–ç”Ÿæˆ `gcc -MMD`
* å¤šå¹³å°ç¼–è¯‘
* å¤šçº§ç›®å½•æ„å»ºï¼ˆé…åˆå­ Makefileï¼‰
* PHONY ä¼ªç›®æ ‡ï¼Œé¿å…ä¸æ–‡ä»¶åŒåå†²çª

---

## ğŸ“¦ æ¨¡æ¿ä¸‹è½½å»ºè®®ï¼ˆå¯æä¾›ï¼‰

| åç§°                     | æè¿°                      |
| ---------------------- | ----------------------- |
| `Makefile-basic`       | é€‚åˆå•ç›®å½•ç®€å•å·¥ç¨‹               |
| `Makefile-advanced`    | è‡ªåŠ¨æŸ¥æ‰¾ç›®å½•ã€è‡ªåŠ¨ä¾èµ–ã€è‡ªåŠ¨æ¸…ç†        |
| `Makefile-for-library` | æ„å»º `.a` é™æ€åº“æˆ– `.so` åŠ¨æ€åº“  |
| `Makefile-subdir`      | æ”¯æŒå¤šçº§ç›®å½•ï¼ˆsrc/include/binï¼‰ |

---

## ğŸ§ª æ¨èç»ƒä¹ 

1. æŠŠä½ å·²æœ‰çš„ `.c/.h` å·¥ç¨‹æ”¹æˆ Makefile æ„å»º
2. æ·»åŠ  `make run` è‡ªåŠ¨æ‰§è¡Œç¨‹åº
3. å°è¯• `make debug`ã€`make release` å¤šç§æ„å»ºæ¨¡å¼

---

éœ€è¦æˆ‘ä¸ºä½ ç”Ÿæˆï¼š

* ğŸ“ ç¤ºä¾‹å·¥ç¨‹ + å®Œæ•´ Makefile æ¨¡æ¿
* ğŸ“˜ Markdown æ ¼å¼ Makefile æ•™ç¨‹
* âœ… è‡ªåŠ¨ç”Ÿæˆä¾èµ–çš„ Makefile å†™æ³•ï¼ˆé¿å…å¤´æ–‡ä»¶ä¿®æ”¹ç¼–è¯‘ä¸ç”Ÿæ•ˆï¼‰

æ¬¢è¿å‘Šè¯‰æˆ‘ä½ å½“å‰çš„é¡¹ç›®ç»“æ„ï¼Œæˆ‘å¯ä»¥**å¸®ä½ å†™ä¸€ä»½ä¸“å± Makefile**ã€‚


å¥½çš„ï¼ä»¥ä¸‹æ˜¯é’ˆå¯¹ä½ ä¹‹å‰ **æ¨èç»ƒä¹ ** çš„å…·ä½“ç¤ºèŒƒç­”æ¡ˆï¼Œå¸®ä½ å¿«é€ŸæŒæ¡å¤šæ–‡ä»¶ Makefile ç¼–å†™å’Œä½¿ç”¨ã€‚

---

# æ¨èç»ƒä¹ ç­”æ¡ˆ

å‡è®¾é¡¹ç›®ç»“æ„ï¼š

```
project/
â”œâ”€â”€ main.c
â”œâ”€â”€ utils.c
â”œâ”€â”€ utils.h
â”œâ”€â”€ Makefile
```

---

## 1. åŸºç¡€ Makefileï¼Œæ”¯æŒç¼–è¯‘æ‰€æœ‰æ–‡ä»¶

```makefile
CC = gcc
CFLAGS = -Wall -g

SRCS = main.c utils.c
OBJS = $(SRCS:.c=.o)
TARGET = app

all: $(TARGET)

$(TARGET): $(OBJS)
	$(CC) $(OBJS) -o $(TARGET)

%.o: %.c
	$(CC) $(CFLAGS) -c $< -o $@

clean:
	rm -f $(OBJS) $(TARGET)
```

---

## 2. æ·»åŠ  `make run` ç›®æ ‡è‡ªåŠ¨æ‰§è¡Œç¨‹åº

```makefile
run: all
	./$(TARGET)
```

ä½¿ç”¨ï¼š

```bash
make run
```

---

## 3. æ·»åŠ  `debug` å’Œ `release` ä¸¤ç§æ„å»ºæ¨¡å¼

```makefile
debug: CFLAGS += -DDEBUG -g
debug: clean all

release: CFLAGS += -O2
release: clean all
```

è°ƒç”¨ï¼š

```bash
make debug   # å¸¦è°ƒè¯•ä¿¡æ¯ç¼–è¯‘
make release # ä¼˜åŒ–ç¼–è¯‘
```

---

## 4. å®Œæ•´ç¤ºä¾‹ Makefile ç»“åˆä»¥ä¸Šå†…å®¹

```makefile
CC = gcc
CFLAGS = -Wall

SRCS = main.c utils.c
OBJS = $(SRCS:.c=.o)
TARGET = app

all: $(TARGET)

$(TARGET): $(OBJS)
	$(CC) $(OBJS) -o $(TARGET)

%.o: %.c
	$(CC) $(CFLAGS) -c $< -o $@

run: all
	./$(TARGET)

debug: CFLAGS += -DDEBUG -g
debug: clean all

release: CFLAGS += -O2
release: clean all

clean:
	rm -f $(OBJS) $(TARGET)
```

---

## ä½¿ç”¨æµç¨‹ç¤ºèŒƒ

```bash
make            # ç¼–è¯‘é»˜è®¤ç‰ˆæœ¬
make run        # ç¼–è¯‘å¹¶è¿è¡Œç¨‹åº
make debug      # ç¼–è¯‘å¸¦è°ƒè¯•ä¿¡æ¯ç‰ˆæœ¬
make release    # ç¼–è¯‘ä¼˜åŒ–ç‰ˆæœ¬
make clean      # æ¸…ç†ç›®æ ‡æ–‡ä»¶å’Œç¨‹åº
```

---

å¦‚æœä½ æƒ³è¦ï¼Œæˆ‘å¯ä»¥å¸®ä½ å†™ï¼š

* è‡ªåŠ¨å¤´æ–‡ä»¶ä¾èµ–çš„ Makefileï¼ˆæ›´æ™ºèƒ½ï¼‰
* å¤šç›®å½•é¡¹ç›® Makefile
* æˆ–è€…å…¶ä»–ç‰¹å®šéœ€æ±‚

ä½ å¯ä»¥ç›´æ¥å‘Šè¯‰æˆ‘ä½ çš„é¡¹ç›®ç»“æ„å’Œè¦æ±‚ï¼

å¥½çš„ï¼ä¸‹é¢è¯¦ç»†è®²è§£ `-I`ã€`-L` å’Œ `-l` è¿™å‡ ä¸ªç¼–è¯‘å’Œé“¾æ¥é€‰é¡¹çš„ä½œç”¨ï¼Œä»¥åŠå¦‚ä½•æ­£ç¡®ä½¿ç”¨å®ƒä»¬ã€‚

---

# 1. `-I` é€‰é¡¹ï¼šæŒ‡å®šå¤´æ–‡ä»¶æœç´¢è·¯å¾„ï¼ˆInclude pathï¼‰

* **ä½œç”¨**ï¼šå‘Šè¯‰ç¼–è¯‘å™¨é™¤äº†é»˜è®¤çš„ç³»ç»Ÿç›®å½•å¤–ï¼Œè¿˜è¦å»æŒ‡å®šçš„ç›®å½•æŸ¥æ‰¾å¤´æ–‡ä»¶ï¼ˆ`.h`ï¼‰ã€‚
* **è¯­æ³•**ï¼š

  ```bash
  gcc -I/path/to/include ...
  ```
* **ç¤ºä¾‹**ï¼š
  å‡è®¾ä½ æœ‰è‡ªå®šä¹‰å¤´æ–‡ä»¶æ”¾åœ¨ `/usr/local/include/mylib`ï¼Œè€Œä½ çš„ä»£ç ä¸­å†™äº†ï¼š

  ```c
  #include "myheader.h"
  ```

  é‚£ä½ ç¼–è¯‘æ—¶å°±éœ€è¦å‘Šè¯‰ gcc å» `/usr/local/include/mylib` æ‰¾ï¼š

  ```bash
  gcc -I/usr/local/include/mylib main.c -o main
  ```
* **å¯ä»¥å¤šæ¬¡ä½¿ç”¨**ï¼š

  ```bash
  gcc -I/dir1 -I/dir2 main.c -o main
  ```
* **ä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ**ï¼š
  å› ä¸ºé»˜è®¤åªæŸ¥æ‰¾ç³»ç»Ÿæ ‡å‡†è·¯å¾„ï¼ˆå¦‚ `/usr/include`ï¼‰ï¼Œç”¨æˆ·è‡ªå®šä¹‰å¤´æ–‡ä»¶ç›®å½•éœ€è¦é¢å¤–æŒ‡å®šã€‚

---

# 2. `-L` é€‰é¡¹ï¼šæŒ‡å®šåº“æ–‡ä»¶æœç´¢è·¯å¾„ï¼ˆLibrary pathï¼‰

* **ä½œç”¨**ï¼šå‘Šè¯‰é“¾æ¥å™¨åœ¨é“¾æ¥é˜¶æ®µï¼Œé™¤äº†é»˜è®¤ç³»ç»Ÿè·¯å¾„ï¼Œè¿˜è¦å»æŒ‡å®šç›®å½•æŸ¥æ‰¾åº“æ–‡ä»¶ï¼ˆ`.so`ã€`.a`ï¼‰ã€‚
* **è¯­æ³•**ï¼š

  ```bash
  gcc ... -L/path/to/lib ...
  ```
* **ç¤ºä¾‹**ï¼š
  ä½ çš„åº“æ–‡ä»¶ `libfoo.a` æˆ– `libfoo.so` æ”¾åœ¨ `/usr/local/lib/mylib`ï¼Œé“¾æ¥æ—¶éœ€è¦ï¼š

  ```bash
  gcc main.o -L/usr/local/lib/mylib -lfoo -o main
  ```
* **å¯ä»¥å¤šæ¬¡ä½¿ç”¨**ï¼š

  ```bash
  gcc main.o -L/dir1 -L/dir2 -lfoo -lbar -o main
  ```

---

# 3. `-l` é€‰é¡¹ï¼šæŒ‡å®šè¦é“¾æ¥çš„åº“ï¼ˆLink libraryï¼‰

* **ä½œç”¨**ï¼šå‘Šè¯‰é“¾æ¥å™¨é“¾æ¥æŸä¸ªåº“ï¼Œæ ¼å¼æ˜¯å»æ‰¾åå­—å½¢å¦‚ `lib{name}.so` æˆ– `lib{name}.a` çš„åº“æ–‡ä»¶ã€‚
* **è¯­æ³•**ï¼š

  ```bash
  -l{name}
  ```
* **ç¤ºä¾‹**ï¼š
  `-lfoo` ä¼šå»æœç´¢æ–‡ä»¶åä¸º `libfoo.so` æˆ– `libfoo.a` çš„åº“ã€‚
* **ä½¿ç”¨ç¤ºä¾‹**ï¼š

  ```bash
  gcc main.o -L/usr/local/lib -lfoo -o main
  ```

  è¿™æ¡å‘½ä»¤ä¼šé“¾æ¥ `/usr/local/lib/libfoo.so` æˆ– `/usr/local/lib/libfoo.a`ã€‚

---

# 4. å¸¸è§ç¼–è¯‘é“¾æ¥å®Œæ•´ç¤ºä¾‹

```bash
gcc -I/usr/local/include/mylib -L/usr/local/lib/mylib main.c -lfoo -o main
```

* `-I` å‘Šè¯‰ç¼–è¯‘å™¨å» `/usr/local/include/mylib` æ‰¾å¤´æ–‡ä»¶ã€‚
* `-L` å‘Šè¯‰é“¾æ¥å™¨å» `/usr/local/lib/mylib` æ‰¾åº“æ–‡ä»¶ã€‚
* `-lfoo` å‘Šè¯‰é“¾æ¥å™¨é“¾æ¥ `libfoo.so` æˆ– `libfoo.a`ã€‚

---

# 5. Makefile é‡Œå¦‚ä½•å†™

```makefile
CC = gcc
CFLAGS = -Wall -g -I/usr/local/include/mylib
LDFLAGS = -L/usr/local/lib/mylib -lfoo

TARGET = app
OBJS = main.o utils.o

all: $(TARGET)

$(TARGET): $(OBJS)
	$(CC) $(OBJS) $(LDFLAGS) -o $(TARGET)

%.o: %.c
	$(CC) $(CFLAGS) -c $< -o $@

clean:
	rm -f $(OBJS) $(TARGET)
```

---

# 6. å…¶ä»–æ³¨æ„ç‚¹

* åº“åä¸å†™å‰ç¼€ `lib` å’Œåç¼€ `.so` æˆ– `.a`ï¼Œ`-lfoo` å¯¹åº” `libfoo.so`ã€‚
* `-L` ç›®å½•å¿…é¡»åœ¨ `-l` å‰é¢ï¼Œå¦åˆ™å¯èƒ½æ‰¾ä¸åˆ°åº“ã€‚
* ä½ ä¹Ÿå¯ä»¥ç”¨ç»å¯¹è·¯å¾„é“¾æ¥åº“ï¼Œä¸ç”¨ `-L` `-l`ï¼Œæ¯”å¦‚ï¼š

  ```bash
  gcc main.o /usr/local/lib/libfoo.a -o main
  ```
* åŠ¨æ€åº“ï¼ˆ`.so`ï¼‰è¿è¡Œæ—¶ä¹Ÿéœ€è¦ç³»ç»Ÿèƒ½æ‰¾åˆ°ï¼Œé€šå¸¸é€šè¿‡è®¾ç½® `LD_LIBRARY_PATH` ç¯å¢ƒå˜é‡æˆ–é…ç½® `/etc/ld.so.conf`ã€‚

---

éœ€è¦æˆ‘å¸®ä½ å†™ä¸€ä¸ªç¤ºä¾‹é¡¹ç›®ï¼ŒåŒ…æ‹¬ç”¨ç¬¬ä¸‰æ–¹åº“çš„å®Œæ•´ Makefile å—ï¼Ÿ


å½“ç„¶ï¼è¿™é‡Œè¯¦ç»†è§£é‡Šä¸€ä¸‹ Makefile ä¸­å¸¸è§çš„ä¸¤ä¸ªå˜é‡ï¼š`CFLAGS` å’Œ `LDFLAGS`ã€‚

---

## 1. `CFLAGS` ï¼ˆCompiler Flagsï¼Œç¼–è¯‘å™¨é€‰é¡¹ï¼‰

* **ä½œç”¨**ï¼šä¼ é€’ç»™ç¼–è¯‘å™¨ï¼ˆå¦‚ `gcc`ï¼‰çš„å‚æ•°ï¼Œç”¨æ¥æ§åˆ¶ç¼–è¯‘è¿‡ç¨‹ã€‚

* **é€šå¸¸åŒ…å«**ï¼š

  * è­¦å‘Šé€‰é¡¹ï¼ˆæ¯”å¦‚ `-Wall` æ‰“å¼€æ‰€æœ‰è­¦å‘Šï¼‰
  * ä¼˜åŒ–é€‰é¡¹ï¼ˆæ¯”å¦‚ `-O2`ï¼‰
  * è°ƒè¯•ä¿¡æ¯ï¼ˆæ¯”å¦‚ `-g`ï¼‰
  * å¤´æ–‡ä»¶æœç´¢è·¯å¾„ï¼ˆ`-I/path/to/include`ï¼‰
  * å®å®šä¹‰ï¼ˆ`-DDEBUG`ï¼‰

* **ç¤ºä¾‹**ï¼š

```makefile
CFLAGS = -Wall -g -O2 -I/usr/local/include/mylib
```

* å½“æ‰§è¡Œç¼–è¯‘å‘½ä»¤æ—¶ï¼Œé€šå¸¸è¿™æ ·ç”¨ï¼š

```bash
gcc $(CFLAGS) -c main.c -o main.o
```

---

## 2. `LDFLAGS` ï¼ˆLinker Flagsï¼Œé“¾æ¥å™¨é€‰é¡¹ï¼‰

* **ä½œç”¨**ï¼šä¼ é€’ç»™é“¾æ¥å™¨ï¼ˆLinkerï¼Œé€šå¸¸ä¹Ÿæ˜¯ç”± `gcc` è°ƒç”¨çš„ `ld`ï¼‰çš„å‚æ•°ï¼Œæ§åˆ¶é“¾æ¥è¿‡ç¨‹ã€‚

* **é€šå¸¸åŒ…å«**ï¼š

  * åº“æœç´¢è·¯å¾„ï¼ˆ`-L/path/to/lib`ï¼‰
  * éœ€è¦é“¾æ¥çš„åº“ï¼ˆ`-lfoo`ï¼‰
  * å…¶ä»–é“¾æ¥é€‰é¡¹ï¼Œå¦‚é“¾æ¥æ—¶çš„è°ƒè¯•ã€é™æ€/åŠ¨æ€é“¾æ¥æ§åˆ¶

* **ç¤ºä¾‹**ï¼š

```makefile
LDFLAGS = -L/usr/local/lib/mylib -lfoo -lbar
```

* å½“æ‰§è¡Œé“¾æ¥å‘½ä»¤æ—¶ï¼Œé€šå¸¸è¿™æ ·ç”¨ï¼š

```bash
gcc main.o utils.o $(LDFLAGS) -o app
```

---

## å°ç»“å¯¹æ¯”

| å˜é‡å       | ä½œç”¨é˜¶æ®µ | å…¸å‹å†…å®¹                   | ä½¿ç”¨å‘½ä»¤ä¸¾ä¾‹                              |
| --------- | ---- | ---------------------- | ----------------------------------- |
| `CFLAGS`  | ç¼–è¯‘é˜¶æ®µ | `-Wall -g -O2 -I/path` | `gcc $(CFLAGS) -c main.c -o main.o` |
| `LDFLAGS` | é“¾æ¥é˜¶æ®µ | `-L/path -lfoo -lbar`  | `gcc main.o $(LDFLAGS) -o app`      |

---

å¦‚æœä½ éœ€è¦ï¼Œæˆ‘å¯ä»¥å¸®ä½ å†™ä¸€ä¸ªåŒ…å«è¿™ä¸¤ä¸ªå˜é‡çš„å®Œæ•´ Makefile ç¤ºä¾‹ï¼


è¿™ä¸¤è¡Œæ˜¯ Makefile é‡Œå¸¸ç”¨çš„å˜é‡å®šä¹‰å†™æ³•ï¼Œç”¨äºè‡ªåŠ¨è·å–å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ `.c` æ–‡ä»¶ï¼Œå¹¶æ ¹æ®å®ƒä»¬ç”Ÿæˆå¯¹åº”çš„ `.o` æ–‡ä»¶ååˆ—è¡¨ã€‚

---

## è¯¦ç»†è®²è§£

### 1. `SRCS := $(wildcard *.c)`

* `wildcard` æ˜¯ Make çš„å†…ç½®å‡½æ•°ï¼Œç”¨æ¥åŒ¹é…ç¬¦åˆæŸä¸ªæ¨¡å¼çš„æ–‡ä»¶ååˆ—è¡¨ã€‚
* `*.c` è¡¨ç¤ºå½“å‰ç›®å½•ä¸‹æ‰€æœ‰ä»¥ `.c` ç»“å°¾çš„æºä»£ç æ–‡ä»¶ã€‚
* `SRCS` å˜é‡å› æ­¤è¢«èµ‹å€¼æˆå½“å‰ç›®å½•ä¸‹æ‰€æœ‰ `.c` æ–‡ä»¶çš„åå­—ï¼Œæ¯”å¦‚ï¼š

```
SRCS = main.c utils.c network.c
```

---

### 2. `OBJS := $(SRCS:.c=.o)`

* è¿™æ˜¯ Make çš„å­—ç¬¦ä¸²æ›¿æ¢åŠŸèƒ½ã€‚
* è¯­æ³•æ˜¯ï¼š`$(å˜é‡å:æ¨¡å¼=æ›¿æ¢)`
* å®ƒä¼šæŠŠ `SRCS` ä¸­çš„æ¯ä¸ª `.c` åç¼€æ›¿æ¢æˆ `.o`ã€‚
* ä¾‹å¦‚ï¼Œå¦‚æœ `SRCS = main.c utils.c network.c`ï¼Œåˆ™ï¼š

```
OBJS = main.o utils.o network.o
```

---

## æ€»ç»“

è¿™ä¸¤è¡Œä»£ç çš„åŠŸèƒ½æ˜¯ï¼š

* **è‡ªåŠ¨æ”¶é›†å½“å‰ç›®å½•æ‰€æœ‰çš„ C æºæ–‡ä»¶ååˆ° `SRCS`**
* **è‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„ç›®æ ‡æ–‡ä»¶ `.o` åç§°åˆ° `OBJS`**

è¿™æ ·å†™çš„å¥½å¤„æ˜¯ï¼š

* æ–¹ä¾¿ç»´æŠ¤ï¼Œæ— éœ€æ‰‹åŠ¨å†™æ­»æ–‡ä»¶åï¼›
* å¢åˆ  `.c` æ–‡ä»¶æ—¶ Makefile è‡ªåŠ¨é€‚é…ã€‚

---

## ä¾‹å­

å‡è®¾å½“å‰ç›®å½•æœ‰ï¼š

```
main.c utils.c helper.c
```

æ‰§è¡Œï¼š

```makefile
SRCS := $(wildcard *.c)
OBJS := $(SRCS:.c=.o)

all:
	echo $(SRCS)
	echo $(OBJS)
```

è¿è¡Œ `make all` è¾“å‡ºï¼š

```
main.c utils.c helper.c
main.o utils.o helper.o
```

---

éœ€è¦æˆ‘å¸®ä½ å†™ä¸€ä¸ªåŒ…å«è¿™ä¸¤è¡Œçš„å®Œæ•´è‡ªåŠ¨åŒ– Makefile å—ï¼Ÿ
